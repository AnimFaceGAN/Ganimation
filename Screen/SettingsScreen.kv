<SettingsScreen>:
    drop_area_image: drop_area_image
    drop_area_label: drop_area_label

    BoxLayout:
        orientation: 'vertical'     # 'horizontal'だと横一列
        size: root.size
        BoxLayout:
            size_hint_y: 0.1

            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            Image:
                source: './UI_images/title.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True

        Label:
            size_hint_y:0.002
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

        BoxLayout: #Select Buttons(image setting and other settings)
            size_hint_y: 0.1

            Button:
                text: '顔イラスト設定'
                size: self.size
                color: 1,1,1,1
                background_color: (0.0, 0.6, 0.7, 1)
                #on_press: root.manager.current = 'settings'

            Button:
                text: '背景設定'
                color: 1,1,1,1
                size: self.size
                background_color: (0.3, 0.3, 0.3, 1.0)
                #on_press: root.manager.current = 'character_settings'
                on_release: root.to_settings2()

        Label: #Narrow gap
            size_hint_y:0.002
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

        BoxLayout: #Main Part
            size_hint_y: 0.4996
            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            BoxLayout:

                AnchorLayout:
                    anchor_x: 'center'
                    anchor_y: 'center'
                    padding: 40

                    Label:
                        canvas.before:
                            Color:
                                rgba: 0.1, 0.1, 0.1, 1
                                #rgba: 0.2, 0.2, 0.2, 0.2
                            Rectangle:
                                pos: self.pos
                                size: self.size

                    Image:
                        id: drop_area_image
                        source: root.image_src
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        allow_stretch: True

                    Label:
                        id: drop_area_label
                        bold: True
                        text: 'ファイルをドラッグ＆ドロップ'
                        color: 1,1,1,1
                        size: self.size
                        #font_size: dp(20)

            BoxLayout:
                AnchorLayout:
                    anchor_x: 'center'
                    anchor_y: 'center'
                    padding: 40

                    BoxLayout:
                        orientation: 'vertical'

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '使い方'
                                text_size: self.width, None
                                size: self.size
                                color: 1,1,1,0.8
                                halign: 'center'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.2, 0.2, 0.2, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　1. 使用したいキャラクターの顔画像を準備してください'
                                text_size: self.width, None
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                color: 1,1,1,0.8
                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size
                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　2. 左の枠内に用意した画像をドラッグ&ドロップしてください'
                                text_size: self.width, None
                                size: self.size
                                color: 1,1,1,0.8
                                #font_size: dp(20)
                                #text_size: self.size
                                halign: 'left'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　3. 画像の読み込みに成功するとアバターの使用を開始できます'
                                text_size: self.width, None
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                color: 1,1,1,0.8
                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '使用できる画像'
                                text_size: self.width, None
                                size: self.size
                                color: 1,1,1,0.8
                                halign: 'center'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.2, 0.2, 0.2, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　・画像サイズは256px×256px（自動リサイズ）'
                                text_size: self.width, None
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                color: 1,1,1,0.8
                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　・キャラクターの頭は中央128px×128px内に収める'
                                color: 1,1,1,0.8
                                text_size: self.width, None
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　・目と口は大きく開いている'
                                color: 1,1,1,0.8
                                text_size: self.width, None
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　・頭が正面を向いている'
                                color: 1,1,1,0.8
                                text_size: self.width, None
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　・画像はRGBA形式で背景は透過されている'
                                color: 1,1,1,0.8
                                text_size: self.width, None
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size
                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                markup: True
                                text: '　　[ref=some][color=0088aa]https://www.remove.bg/ja[/color][/ref] （こちらで背景透過できます）'
                                on_ref_press:
                                    import webbrowser
                                    webbrowser.open('https://www.remove.bg/ja')
                                color: 1,1,1,0.8
                                text_size: self.width, None
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size
                        BoxLayout:
                            size_hint_y: 0.12
                            Label:
                                text: ''
                                color: 1,1,1,0.8
                                font_size: dp(20)
                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

        BoxLayout:
            size_hint_y: 0.2

            Button:
                text: 'save1'
                color: 1,1,1,1
                size: self.size
                background_color: (0.3, 0.3, 0.3, 1)
                on_release: root.select_button(1)

            Button:
                text: 'save2'
                color: 1,1,1,1
                size: self.size
                background_color: (0.3, 0.3, 0.3, 1)
                on_release: root.select_button(2)

            Button:
                text: 'save3'
                color: 1,1,1,1
                size: self.size
                background_color: (0.3, 0.3, 0.3, 1)
                on_release: root.select_button(3)

            Button:
                text: 'save4'
                color: 1,1,1,1
                size: self.size
                background_color:(0.3, 0.3, 0.3, 1)
                on_release: root.select_button(4)

            Button:
                text: 'save5'
                color: 1,1,1,1
                size: self.size
                background_color: (0.3, 0.3, 0.3, 1)
                on_release: root.select_button(5)

            Button:
                text: 'save6'
                color: 1,1,1,1
                size: self.size
                background_color: (0.3, 0.3, 0.3, 1)
                on_release: root.select_button(6)

        BoxLayout:
            size_hint_y: 0.02
            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

        BoxLayout:
            size_hint_y: 0.08

            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            BoxLayout:
                size_hint_x: 0.4

            BoxLayout:
                size_hint_x: 0.2
                orientation:'horizontal'
                Button:
                    text: 'close'
                    color: 1,1,1,1
                    background_color: (0.3, 0.3, 0.1)
                    on_release: root.popup_close()

            BoxLayout:
                size_hint_x: 0.4