<AvatarGenerateScreen>:
    drop_area_image: drop_area_image
    drop_area_label: drop_area_label

    BoxLayout:
        orientation: 'horizontal'     # 'horizontal'だと横一列
        size: root.size

        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.15

            Image:
                source: './UI_images/title.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True

                canvas.before:
                    Color:
                        rgba: 0.1, 0.1, 0.1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

            Button:
                text: 'アバター生成'
                text_size: self.size
                font_size: dp(15)
                color: 1,1,1,1
                size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: (0.0, 0.6, 0.7, 1)
                #on_release: root.to_settings0()

            Button:
                text: 'アバター選択'
                text_size: self.size
                font_size: dp(15)
                color: 1,1,1,1
                size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: (0.3, 0.3, 0.3, 1.0)
                on_release: root.to_settings1()

            Button:
                text: '背景設定'
                text_size: self.size
                font_size: dp(15)
                color: 1,1,1,1
                size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: (0.3, 0.3, 0.3, 1.0)
                on_release: root.to_settings2()

            Button:
                text: 'その他設定'
                text_size: self.size
                font_size: dp(15)
                color: 1,1,1,1
                size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: (0.3, 0.3, 0.3, 1.0)
                on_release: root.to_settings3()

            Button:
                text: 'close'
                text_size: self.size
                font_size: dp(15)
                color: 1,1,1,1
                size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: (0.3, 0.3, 0.3, 1.0)
                on_release: root.popup_close()

        BoxLayout:
            size_hint_x: 0.85
            orientation: 'vertical'

            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            BoxLayout:
                size_hint_y: 0.9
                canvas.before:
                    Color:
                        rgba: 0.1, 0.1, 0.1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

                BoxLayout:
                    orientation: 'vertical'

                    BoxLayout:
                        size_hint_y: 0.2
                        Label:
                            id: generate_log
                            bold: True
                            # text: ''
                            # font_size: dp(20)
                            # color: 1,1,1,1
                            # halign: 'center'
                            # valign: 'middle'
                            # bcolor: 1,0,0,1
                            # padding_y: [0,0]
                            # margin_y : [0,0]
                            text_size: self.size
                            font_size: dp(15)
                            size: self.size
                            color: 1,1,1,1
                            halign: 'center'
                            valign: 'middle'

                    AnchorLayout:
                        size_hint_y: 0.6
                        anchor_x: 'center'
                        anchor_y: 'center'
                        padding: 0
                        margin : 0

                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.1, 0.1, 0.1, 1
                                    #rgba: 0.2, 0.2, 0.2, 0.2
                                Rectangle:
                                    pos: self.pos
                                    size: self.size

                        Image:
                            id: drop_area_image
                            source: root.image_src
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            allow_stretch: True

                        Label:
                            id: drop_area_label
                            bold: True
                            text: ""
                            text_size: self.size
                            font_size: dp(15)
                            size: self.size
                            color: 1,1,1,1
                            halign: 'center'
                            valign: 'middle'

                    BoxLayout:
                        size_hint_y: 0.2

                AnchorLayout:
                    anchor_x: 'center'
                    anchor_y: 'center'
                    padding: 30

                    BoxLayout:
                        orientation: 'vertical'

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '使い方'
                                text_size: self.size
                                font_size: dp(15)
                                size: self.size
                                color: 1,1,1,0.8
                                halign: 'center'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.2, 0.2, 0.2, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　1. 使用したいキャラクターの顔画像を準備してください'
                                text_size: self.size
                                size: self.size
                                halign: 'left'
                                valign: 'middle'
                                font_size: dp(15)

                                color: 1,1,1,0.8
                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size
                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　2. 左の枠内に用意した画像を入れてください'
                                text_size: self.size
                                font_size: dp(15)
                                size: self.size
                                color: 1,1,1,0.8
                                #font_size: dp(20)
                                #font_size: dp(20)
                                halign: 'left'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　3. PRERENDERINGボタンを押しアバター生成を始めます'
                                text_size: self.size
                                font_size: dp(15)
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                color: 1,1,1,0.8
                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　4. アバター生成が完了すると選択できるようになります'
                                text_size: self.size
                                font_size: dp(15)
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                color: 1,1,1,0.8
                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '使用できる画像'
                                text_size: self.size
                                font_size: dp(15)
                                size: self.size
                                color: 1,1,1,0.8
                                halign: 'center'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.2, 0.2, 0.2, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　・画像サイズは256px×256px（自動リサイズあり）'
                                text_size: self.size
                                font_size: dp(15)
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                color: 1,1,1,0.8
                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　・キャラクターの頭は中央128px×128px内に収める'
                                text_size: self.size
                                color: 1,1,1,0.8
                                font_size: dp(15)
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　・目と口は大きく開いている'
                                text_size: self.size
                                color: 1,1,1,0.8
                                font_size: dp(15)
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　・頭が正面を向いている'
                                text_size: self.size
                                color: 1,1,1,0.8
                                font_size: dp(15)
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size

                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                text: '　・RGBA形式で背景は透過されている'
                                text_size: self.size
                                color: 1,1,1,0.8
                                font_size: dp(15)
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size
                        BoxLayout:
                            size_hint_y: 0.08
                            Label:
                                markup: True
                                text: '　　[ref=some][color=0088aa]https://www.remove.bg/ja[/color][/ref] （こちらで背景透過）'
                                on_ref_press:
                                    import webbrowser
                                    webbrowser.open('https://www.remove.bg/ja')
                                text_size: self.size
                                color: 1,1,1,0.8
                                font_size: dp(15)
                                size: self.size
                                halign: 'left'
                                valign: 'middle'

                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size
                        BoxLayout:
                            size_hint_y: 0.04
                            Label:
                                text: ''
                                color: 1,1,1,0.8
                                font_size: dp(15)
                                canvas.before:
                                    Color:
                                        rgba: 0.3, 0.3, 0.3, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size



            BoxLayout:
                size_hint_y: 0.1
                orientation: 'horizontal'

                # Button:
                #     id:load_button
                #     text: 'LOAD'
                #     text_size: self.size
                #     font_size: dp(15)
                #     color: 1,1,1,1
                #     size: self.size
                #     halign: 'center'
                #     valign: 'middle'
                #     background_color: (0.3, 0.3, 0.3, 1.0)
                #     on_release: root.open_folder()

                Button:
                    id:render_button
                    text: 'PRERENDERING'
                    text_size: self.size
                    font_size: dp(15)
                    color: 1,1,1,1
                    size: self.size
                    halign: 'center'
                    valign: 'middle'
                    background_color: (0.3, 0.3, 0.3, 1.0)
                    on_release: root.do_prerendering()
